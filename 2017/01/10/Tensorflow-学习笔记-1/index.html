<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tensorflow 学习笔记 1 | 黎诗霆 | LI SHITING</title>

  
  <meta name="author" content="leo">
  

  
  <meta name="description" content="Tensorflow 安装关于tensorflow的安装可以有多种多样：通过不同的版本控制器下载安装，安装CPU版本或者GPU版本，本地安装或者docker安装等等。GPU版本的安装会比CPU版本的稍复杂并且会有一定显卡硬件的限制，好处就是学习的计算过程会更加快，尤其在处理图像相关的学习。出于入门目">
  

  
  
  <meta name="keywords" content="code python tensorflow">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="Tensorflow 学习笔记 1"/>

  <meta property="og:site_name" content="黎诗霆"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="黎诗霆" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">黎诗霆</a>
    </h1>
    <p class="site-description">LI SHITING</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/tag">分类</a></li>
      
        <li><a href="/me">关于</a></li>
      
        <li><a href="/archives">归档</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>Tensorflow 学习笔记 1</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/01/10/Tensorflow-学习笔记-1/" rel="bookmark">
        <time class="entry-date published" datetime="2017-01-10T10:53:15.000Z">
          2017-01-10
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h1 id="Tensorflow-安装"><a href="#Tensorflow-安装" class="headerlink" title="Tensorflow 安装"></a>Tensorflow 安装</h1><p>关于<code>tensorflow</code>的安装可以有多种多样：通过不同的版本控制器下载安装，安装CPU版本或者GPU版本，本地安装或者<code>docker</code>安装等等。GPU版本的安装会比CPU版本的稍复杂并且会有一定显卡硬件的限制，好处就是学习的计算过程会更加快，尤其在处理图像相关的学习。出于入门目的，最简单的配置就是通过<code>pip</code>直接安装CPU版本的<code>tensorflow</code>。<br>首先安装一下<code>pip</code>。<code>easy_install</code>也是一个安装管理器，python自带的。可以先通过它安装<code>pip</code>，再用<code>pip</code>安装以后千千万万的库。同时安装并升级<code>six</code>模块。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo easy_install pip</div><div class="line">$ sudo easy_install --upgrade six</div></pre></td></tr></table></figure></p>
<p>在<code>pip</code>安装完成功后安装<code>tensorflow</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install tensorflow</div></pre></td></tr></table></figure></p>
<p>如果安装失败可能是版本问题，在官方网站的<a href="https://www.tensorflow.org/get_started/os_setup" target="_blank" rel="external">下载安装页面</a>找到特定的版本（特定的操作系统+特定的python+cpu/gpu）来安装。比如以2.7版本python，在mac系统上安装cpu版本，可以依次执行下面命令<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Mac OS X, CPU only, Python 2.7:</span></div><div class="line">$ export TF_BINARY_URL=https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow<span class="number">-0.12</span><span class="number">.1</span>-py2-none-any.whl</div><div class="line"><span class="comment"># Python 2</span></div><div class="line">$ sudo pip install --upgrade $TF_BINARY_URL</div></pre></td></tr></table></figure></p>
<h1 id="Tensorflow-简单例子"><a href="#Tensorflow-简单例子" class="headerlink" title="Tensorflow 简单例子"></a>Tensorflow 简单例子</h1><p>预备：配有python的机器，安装<code>tensorflow</code>和<code>numpy</code>库<br>目的是用神经网络通过一系列点预测出线性的曲线，也就是确定y=ax+b中的a和b的值。</p>
<h3 id="思想"><a href="#思想" class="headerlink" title="思想"></a>思想</h3><p>先建立一个模型<code>y=0.1x+0.3</code>，这就是我们要求的理想的回归模型。同时我们通过随机给出一些点，让机器学习以找到x,y的关系。</p>
<h3 id="Step1"><a href="#Step1" class="headerlink" title="Step1"></a>Step1</h3><p>导入必要的包。首先这个例子需要用到的库使<code>tensorflow</code>和<code>numpy</code>，因此第一步应该先导入这些库。为了简单起见，用tf和np这样的缩写来表示。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div></pre></td></tr></table></figure></p>
<h3 id="Step2"><a href="#Step2" class="headerlink" title="Step2"></a>Step2</h3><p>创建数据集。其次是创建数据集，这里具体指的是生成x点和y点。如果在其他项目比如学习手写数字识别，那么数据集就应该是图片和标签。这里使用<code>np.random.rand(个数)</code>函数生成随机数值,同时可以用<code>astype(数据类型)</code> 来指定生成随机数的类型。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">x_data = np.random.rand(<span class="number">100</span>).astype(np.float32);</div><div class="line">y_data = x_data*<span class="number">0.1</span>+<span class="number">0.3</span></div></pre></td></tr></table></figure></p>
<h3 id="Step3"><a href="#Step3" class="headerlink" title="Step3"></a>Step3</h3><p>第三部是定义结构。这部分开始涉及tensorflow了。通常使用tensorflow有两部分，一部分是<strong>定义结构</strong>，另一部分是<strong>运行</strong>。在这个例子里，首先定义一个Weights和biases变量，这个就是机器要通过学习来改良的数学模型，也就是<code>y= Weights*x+biases</code>。起初，机器是不知道Weights应该是0.1，biases应该是0.3的，但总得有一个值。因此定义结构就是<strong>初始化</strong>一些机器<strong>需要通过学习来改变的参数</strong>。</p>
<p>我们使用tensorflow自带的<code>Variable(初始值)</code>函数来创建变量。注意，这里使用两种不同的方式来初始化Variable。第一个是采用<code>random_uniform()</code>函数进行初始化，<code>[1]</code>表示一维，<code>-1.0</code>和<code>1.0</code>表示范围。第二个是采用<code>zeros()</code>函数生成的零作为初始值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Weights = tf.Variable(tf.random_uniform([<span class="number">1</span>], <span class="number">-1.0</span>, <span class="number">1.0</span>))</div><div class="line">biases = tf.Variable(tf.zeros([<span class="number">1</span>]))</div></pre></td></tr></table></figure>
<p>同时我们需要定义预测值和偏差值，也就是<code>y</code>和<code>loss</code>。y的表达式在上面已经解释过，至于偏差值<code>loss</code>的定义这里采用预测值和真实值的差的平方取平均值。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">y = Weights*x_data+biases</div><div class="line">loss = tf.reduce_mean(tf.square(y-y_data))</div></pre></td></tr></table></figure></p>
<p>此外，我们需要定义一个优化器，这里使用的优化器是梯度下降<code>GradientDescentOptimizer(学习效率)</code>，学习效率一般是小于1的值。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">optimizer = tf.train.GradientDescentOptimizer(<span class="number">0.5</span>)</div><div class="line">train = optimizer.minimize(loss)</div></pre></td></tr></table></figure></p>
<p>最后我们需要初始化所有我们定义的变量，存入init里。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">init = tf.initialize_all_variables()</div></pre></td></tr></table></figure></p>
<h3 id="Step4"><a href="#Step4" class="headerlink" title="Step4"></a>Step4</h3><p>开始执行学习</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">sess = tf.Session()</div><div class="line">sess.run(init)</div><div class="line"></div><div class="line"><span class="keyword">for</span> step <span class="keyword">in</span> range(<span class="number">201</span>):</div><div class="line">    sess.run(train)</div><div class="line">    <span class="keyword">if</span> step % <span class="number">20</span> ==<span class="number">0</span> :</div><div class="line">        <span class="keyword">print</span> (step, sess.run(Weights), sess.run(biases))</div></pre></td></tr></table></figure>
<h3 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h3><p>以下是打印在控制台console上面的信息，第一个数值当前已训练的次数，第二个数值是学习到的Weights值（以及它的数据类型），第三个是biases的值（以及它的数据类型）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">(0, array([ 0.25665027], dtype=float32), array([ 0.29376262], dtype=float32))</div><div class="line">(20, array([ 0.12604944], dtype=float32), array([ 0.28607407], dtype=float32))</div><div class="line">(40, array([ 0.10545368], dtype=float32), array([ 0.29708451], dtype=float32))</div><div class="line">(60, array([ 0.10114178], dtype=float32), array([ 0.29938963], dtype=float32))</div><div class="line">(80, array([ 0.10023905], dtype=float32), array([ 0.29987222], dtype=float32))</div><div class="line">(100, array([ 0.10005005], dtype=float32), array([ 0.29997325], dtype=float32))</div><div class="line">(120, array([ 0.10001048], dtype=float32), array([ 0.29999441], dtype=float32))</div><div class="line">(140, array([ 0.10000221], dtype=float32), array([ 0.29999885], dtype=float32))</div><div class="line">(160, array([ 0.10000046], dtype=float32), array([ 0.29999977], dtype=float32))</div><div class="line">(180, array([ 0.1000001], dtype=float32), array([ 0.29999995], dtype=float32))</div><div class="line">(200, array([ 0.1000001], dtype=float32), array([ 0.29999995], dtype=float32))</div><div class="line"></div><div class="line">Process finished with exit code 0</div></pre></td></tr></table></figure></p>
<h1 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h1><p><a href="https://github.com/LISHITING/Tensorflow_notes/blob/master/example1.py" target="_blank" rel="external">https://github.com/LISHITING/Tensorflow_notes/blob/master/example1.py</a> </p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/code-python-tensorflow/">code python tensorflow</a>
    </span>
    

    </div>

    
  </div>
</article>

  
	<section id="comments" class="comment">
	  <div id="disqus_thread">
	  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	  </div>
	</section>

	<script type="text/javascript">
	var disqus_shortname = 'leoli';
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	</script>





    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 leo
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>